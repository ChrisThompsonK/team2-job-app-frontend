{% macro paginationControls(pagination, paginationUrls) %}
  {% if pagination.totalPages > 1 %}
    <style>
      .pagination-custom {
        background: white !important;
        color: #000000 !important;
        border: 2px solid #333333 !important;
        padding: 8px 12px !important;
        margin: 2px !important;
        text-decoration: none !important;
        display: inline-block !important;
        font-weight: 600 !important;
        border-radius: 6px !important;
      }
      .pagination-custom:hover {
        background: #1e40af !important;
        color: white !important;
        border-color: #1e40af !important;
      }
      .pagination-custom.active {
        background: #1e40af !important;
        color: white !important;
        border-color: #1e40af !important;
      }
      .pagination-disabled {
        background: #f3f4f6 !important;
        color: #6b7280 !important;
        border: 2px solid #d1d5db !important;
        padding: 8px 12px !important;
        margin: 2px !important;
        display: inline-block !important;
        border-radius: 6px !important;
      }
    </style>
    <div class="flex flex-col items-center gap-4 mt-8">
      <!-- Pagination Info -->
      <div class="text-sm text-gray-600">
        Showing {{ ((pagination.currentPage - 1) * pagination.limit) + 1 }} to 
        {% set endIndex = pagination.currentPage * pagination.limit %}
        {% if endIndex > pagination.totalCount %}
          {{ pagination.totalCount }}
        {% else %}
          {{ endIndex }}
        {% endif %}
        of {{ pagination.totalCount }} results
      </div>

      <!-- Pagination Controls -->
      <div class="flex flex-wrap gap-1 justify-center">
        <!-- First Page -->
        {% if pagination.currentPage > 1 %}
          <a href="{{ paginationUrls.first }}" 
             class="pagination-custom" 
             aria-label="First page">
            «
          </a>
        {% endif %}

        <!-- Previous Page -->
        {% if paginationUrls.previous %}
          <a href="{{ paginationUrls.previous }}" 
             class="pagination-custom" 
             aria-label="Previous page">
            ‹
          </a>
        {% endif %}

        <!-- Calculate visible page range for ellipsis display -->
        {% set showStartEllipsis = paginationUrls.pages[0].page > 1 %}
        {% set showEndEllipsis = paginationUrls.pages[paginationUrls.pages.length - 1].page < pagination.totalPages %}

        <!-- First page (if not in range) -->
        {% if showStartEllipsis %}
          <a href="{{ paginationUrls.first }}" 
             class="pagination-custom">
            1
          </a>
          {% if paginationUrls.pages[0].page > 2 %}
            <span class="pagination-disabled">...</span>
          {% endif %}
        {% endif %}

        <!-- Page number range from prebuilt URLs -->
        {% for pageData in paginationUrls.pages %}
          {% if pageData.isCurrent %}
            <span class="pagination-custom active">{{ pageData.page }}</span>
          {% else %}
            <a href="{{ pageData.url }}" 
               class="pagination-custom">
              {{ pageData.page }}
            </a>
          {% endif %}
        {% endfor %}

        <!-- Last page (if not in range) -->
        {% if showEndEllipsis %}
          {% if paginationUrls.pages[paginationUrls.pages.length - 1].page < pagination.totalPages - 1 %}
            <span class="pagination-disabled">...</span>
          {% endif %}
          <a href="{{ paginationUrls.last }}" 
             class="pagination-custom">
            {{ pagination.totalPages }}
          </a>
        {% endif %}

        <!-- Next Page -->
        {% if paginationUrls.next %}
          <a href="{{ paginationUrls.next }}" 
             class="pagination-custom" 
             aria-label="Next page">
            ›
          </a>
        {% endif %}

        <!-- Last Page -->
        {% if pagination.currentPage < pagination.totalPages %}
          <a href="{{ paginationUrls.last }}" 
             class="pagination-custom" 
             aria-label="Last page">
            »
          </a>
        {% endif %}
      </div>
    </div>
  {% endif %}
{% endmacro %}